<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>RDB</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="workrelated">
	  <meta name="keywords" content="zzp, contract, telecom, infrastructuur">
  	<meta name="author" content="RSDV">
	
    <link rel="stylesheet" href="../css/style_index.css">
	<link rel="shortcut icon" type="image/x-icon" href="pages/docs/images/favicon.ico" />
	

	
	<div class="fixed-header">
			<div id="branding">
				<h2><span class="highlight"> RSDV</span> Eenmanszaak</h2>
			</div>				
				<div>			
					<a href="../index.html">Home</a>
					<a href="webmap001.html">Map1</a>
					<a href="webmap002.html">Map2</a>
					<a href="webpage003.html">N11</a>
					<a href="webpage004.html">RWS</a>
					<a href="webpage006.html">RDB</a>					
				</div>	
	</div>				

	</head>
	<body>


   <div class="container"> 

	  
		<p>Revit Dynamo Blog.</p>
		<p>Dinsdag 6 december 2022</p>

		<p>In een oud probleem gedoken. Hoe knutselen in Revit? In AutoCAD en QGIS kom ik een heel eind met het in en uitvoeren van routines of gedoe met blokken. Binnen Revit moet ik dat allemaal nog gaan uitpluizen. Tijdens mijn tijd bij BAAK heb ik wat dingetjes gedaan met Revit. De verkeersborden en een probeersel van een voedingskast, daar hield het jammer genoeg mee op. Wilde diep in Revit duiken, maar als je er eigenlijk niets hebt te zoeken kan ik me daar niet voor motiveren blijkbaar. Binnen Revit heb je (blijkbaar al sinds 2013) Dynamo, iets van een grafische omgeving om wat dingen te automatiseren. Wilde alle elementen-data uit AutoCAD extraheren in één tijd op zijn plek werpen in de Revit ruimte. Had nog wat oude troep liggen om een poging mee te wagen. Daar ging het niet heel voorspoedig mee. Locatie informatie uit AutoCAD, dat moest je vermenigvuldigen met duizend en dan de projectpositie eraf trekken. Meters tegen millimeters en een verlegd nulpunt, hoe zat het ook weer?</p>
		
		<img src="../image/RDB001.jpg" alt="RDB" width='50%' height='auto'>
		 
		<p>Dynamo was best even wennen. Na het aan elkaar knoppen van een berg nodes, zag ik maar niets gebeuren als ik op de bel drukte. Achteraf omdat de punten buiten het bereik van het project waren gelegen. Alle x en y waarden wat naar beneden geschroefd en nu hebben we tenminste in het Dynamo-scherm zicht op de punten. Deze z-waarden haalde ik uit QGIS. Spot elevation met het AHN.</p>
		
		<img src="../image/RDB002.jpg" alt="RDB" width='100%' height='auto'>
		 
		<p>Nog eens kijken naar families en masttypen, maar ben tevreden met de voortgang. Volgens mij kunnen we alles erin ploffen straks. Kasten, portalen en lichtmasten, de hele santemekraam.</p>

		<p>woensdag 14 december 2022</p>

		<p>Het plaatsen van de lichtmasten heb ik nu enigszins onder controle. Om het proces wat meer inzichtelijk te maken heb ik de masten enorm groot gemaakt. Het is een goeie gewoonte je AutoCAD bestanden zoveel mogelijk te optimaliseren vóór de extractie. Wellicht nog wat meer aan informatie in de blokken stoppen. Buiten een x, y, z en de draaihoek graag in ieder geval een naam en een elementcode. Anders kan je de z waarde uit QGIS niet aan de juiste lichtmast koppelen bijvoorbeeld. </p>
		
		<img src="../image/RDB003.jpg" alt="RDB" width='100%' height='auto'>
		 
		<p>Zelfde project basepunt als dat we bij de Blankenburgverbinding gebruikten, die hoefde ik niet te verzinnen. Als de coördinaten te ver van het projectpunt zijn verwijderd, gaat de hele zaak niet door en krijg je een foutmelding in Dynamo. De getallen in millimeter worden zo groot dat je je er geen voorstelling van maken kan. Wat is er nou dan weer niet goed? Tranen in mijn ogen.
		Nu nog even een routine vinden om de masten te draaien. Lijkt niet belangrijk maar er zit een luik in de schacht waar de kabels in en uit lopen (onder de grond). Die houden ze denk ik evenwijdig met de kant asfalt dus de kabelloop. Daarna doe ik de uithouders plaatsen en draaien. Nog even kijken of ik alle family-instances nog ga nummeren, dan kan ik selecteren bij  naam, en de parameter voor rotatie invoeren. Hopelijk kan dat ook met een Excel bestand. De family van de uithouders heb ik op die manier ingericht. Dat is al bijzonder en komt niet veel voor in Revit. Zal nog wel tegen een en ander aanlopen voor het me lukt, gelukkig werkt dat gepuzzel verslavend en blijf ik door zoeken. </p>
		
		<img src="../image/RDB004.jpg" alt="RDB" width='100%' height='auto'>		
		
		<p>Donderdag 15 december 2022. Hieronder Holysingel A20 met een paar knoeperts.</p>
		
		<img src="../image/RDB005.jpg" alt="RDB" width='100%' height='auto'>
		 
		<p>Vanmorgen vroeg begonnen. De avond ervoor was ik na het zien van een paar YT video’s overtuigd geraakt dat het allemaal wel mee zou vallen met de rest (onder andere het regelen van de rotatie van de masten). Ook nog een paar families aangemaakt voor de uithouder (het gedeelte waar uiteindelijk het armatuur aan komt te hangen). Dat viel nog even vies tegen en ik kreeg in Dynamo steeds foutmeldingen over het type data waarvan de parameter was gemaakt. Dan ben je aan het uitsluiten wat er fout gaat, maar je hebt inmiddels zoveel nodes in de workspace dat er bijna geen beginnen aan is. Gelukkig kan je op elke node in de pijpleiding een listener zetten. Kwam ik later achter.
		Dynamo zit helemaal vol met lijsten. Wat dat betreft is mijn ervaring met QGIS zeker geen weggegooid geld geweest. Ook in die wereld draait alles daarom. </p>
		
		<p>Het was lastig om er weer even helemaal in te komen, dat Revit. Maar na een paar dagen begon het me weer te dagen. Wel moest ik allerlei zaken weer met nieuwe ogen bekijken. In de tussentijd toch wat wijzer geworden met allerlei soorten code. De families moeten op een andere manier worden opgebouwd, als ik wil dat mijn methode werken gaat. Normaal gesproken zit er geen draaihoek in Revit families. Die had ik nog liggen van mijn ramen en deuren-periode (had een paar keer een huis getekend in Revit en wilde in de tekening een deurtje openzetten). Verder zou er in 2D AutoCAD een en ander moeten worden veranderd. In ieder geval iets dat de NLCS symbolen voor lichtmasten en kasten dusdanig worden aangepast, dat de draaihoek in het dynamo script kan worden gebruikt. In ieder geval CW of CCW gelijk schakelen van de hoek. Eigenlijk kan er nog veel meer geautomatiseerd worden. Ga in ieder geval nog een prefab vlak maken dat perpendiculair aan de as van de weg kan meelopen. Om dwarsdoorsnedes te maken. 
		Verder een nieuwe computer graag. Data-worstelen kost keiveel RAM. Over een dag testen drie keer de machine opnieuw op moeten starten. Zit onder andere in Microsoft Office Excel dat ten alle tijde een goed verhaal in het voorbeeldvenster van explorer wil laten zien. Misschien dat uitzetten. Kan ook.
		</p>
		<p>Zondag 18 december 2022</p>
		<p>Na heel, heul veel architecten-YouTube kijken kwam ik iets tegen waar ik mee verder kon. Gelijk weer terug naar de AutoCAD tekening waaruit ik de blokken extraheer. Nodig, een naam (die ik later bij de dwarsdoorsnedes gebruiken kan (en in de onderhoek)). Net als bij de draaihoek, de elementen aanpassen en updaten. Dan de informatie in de families gieten met Dynamo. Gebruik Revit nu als QGIS. 
		Met een bepaalde node kan je een vlak langs een lijn lopen laten. Een andere ingewikkeld genaamde node regelt het zo, dat je met die parameter een sectionview maakt. Dus ik loop per wegvak het tracé langs, met een vlak loodrecht op de hartlijn van de weg. Elke keer als ik bij een element stoppen doe, noteer ik de parameter. (kan automatisch weet ik bijna zeker). Die parameter loopt van 0 aan het begin van de lijn, tot 1 aan het eind. Dan krijg je dus weer een lijstje (jaja), dat je af kan raffelen met een Excel bestand of iets dergelijks. Die plaatst automatisch alle secties, geen gezicht. Nu nog iets verzinnen om ze te hernoemen naar de BSP code of zoiets. Hernoemen bleek niet nodig. Dat moet ook automatisch kunnen, net als dat weer doorsluizen naar de onderhoek.</p>
		
			<img src="../image/RDB006.jpg" alt="RDB" width='100%' height='auto'>	
		
		<p>Hier zijn de dwarsdoorsnedes automatisch geplaatst. Zeker voor de lichtmasten kan je steeds dezelfde hoogte en breedte gebruiken voor de view. Per alignement kan je steeds alle elementen die je tegenkomt op de middenberm op de foto knippen. Ook nog gelukt om de dwarsdoorsnedes op de layout geplaatst te krijgen. Ik heb gezien op YouTube dat je tegenwoordig de plaats van de doorsnede kan regelen. Heb de eerste paar layouts bekeken, maar voor ik de hele serie ga afwerken heb ik geen zin meer. Had nu de oude lichtmasten gebruikt (normaal formaat). Omdat ik de hartlijn van de weg op een andere manier had gemaakt, was de lengte anders en moest ik de lijst met parameters overnieuw maken. Heb eigenlijk nog geen lijn getrokken. Alles via Excel lijsten naar binnen gestampt.</p>
		
		 
		<p>Maandag 19 december 2022</p>
		<p>Later heb ik een script gezien voor het aanmaken van layouts en een gedeelte van de onderhoek invullen vanaf Excel. Beetje aangepast aan onze vreemde manier van werken. Toen een arbeidsgang om alle doorsnedes op een layout te plakken. Zit alleen met de schaal van die doorsnede, wil ik eigenlijk in kunnen stellen (hier pakte het toevallig aardig uit (default blijkbaar 1 : 100)).  Je kan wel aparte packages installeren in Dynamo, waar je de plaats van de viewport op de layout kan controleren, maar die werken niet in Revit 2018. Heb het later met een hack opgelost (de layout onder de viewport verschoven).</p>
		
		<img src="../image/RDB007.jpg" alt="RDB" width='100%' height='auto'>

		<p>Zondag 25 december 2022</p>
		<p>Vanmorgen werd ik wakker, en wist ineens hoe ik de aangepaste families moest indelen. Heb afgelopen week geprobeerd om een manier te vinden, om al de onderdelen in één family onder te brengen en hem dan pas te draaien. Viel nog niet mee. Dacht dat Russische-poppetjes-gewijs wel even te gaan doen, viel tegen. Zou kunnen wat ik wil, alleen zijn niet alle families punt gebaseerd. Sommige hebben een vlak nodig om tegenaan te plaatsen. Al met al heb ik het zwaar onderschat allemaal. Per type lichtmast helemaal opbouwen, plakken en knippen uit alle families die je wil (masten, uithouders en armaturen) en dan een naam geven en de parameter voor rotatie toevoegen. Ook nog geworsteld met wat ik dacht dat de lengte parameter van een lijn was. Die van 0 naar 1 loopt, je weet toch? Die blijkt in een bocht veel harder te lopen dan op een recht stuk. Gelukkig was er ook een node voor de koordlengte in een lijn. Opgelost dus, en in AutoCAD kan je dat van tevoren mooi doen met de hartlijn van de weg. Dan kan je die opdelen in lijnstukken, de lengte nemen en de hele lijn weer opbouwen qua lengte. Al die lijnstukken, daar maak je ook weer een lijstje van en dan zoef naar binnen janken (gebruik je voor de dwarsdoorsnedes (die komen nu heel nauwkeurig terecht)). </p>
		
		<img src="../image/RDB008.jpg" alt="RDB" width='50%' height='auto'>
		 
		<p>Lange masten voor in de middenberm (10.0 m.) soms in een voetplaat op een kunstwerk, kortere voor bij de op en afritten en verkeerspleinen (6.0 m.). Om eerst eens alles op ware grootte te bezien, moest ik weer leren hoe je die families ook weer maken doet. Daarmee aan de slag gaan in bestaande projecten is een regtelrechte ramp. Dus had ik allemaal zelf dingen gefiguurzaagd. Later begreep ik pas dat dat helemaal niet nodig was, maar ik had een family voor de uithouders die ik gesloopt had. Gedurende het leerproces zag ik wat de parameter voor de zichtbaarheid voor een onherstelbare schade kan aanbrengen. Tenminste als je zoals ik alles opent en overschrijft. Versies door elkaar gebruikt. En in het algemeen iets slordig aangelegd bent. Maar daar is deze werkwijze ook ideaal voor. Je gooit erin wat er in de totalen verdeeld in onderdelen uitkomt en vice versa. Zo blijf je jezelf controleren. Ten slotte heb ik de onderdelen families overnieuw geladen in de samengestelde lichtmast. Nodig om de aparte onderdelen in het project te zien. Anders kijkt Revit daar overheen gedurende het maken van de totalen (schedule).</p>

		<p>En toen ging ik draaien. Het plaatsen liep voortreffelijk, daar wil ik niks van zeggen. Maar tijdens het draaien vlogen de lantaarnpalen je om de oren. Door een combinatie van constraints in de schetsen, werd het model instabiel zodra je er een draai aan gaf. Asymmetrische gevormde masten gierden uit de bocht. Dus daar moest ik een en ander aan wijzigen. Symmetrisch maken en de onderdelen die je extra hebt geplaatst verbergen in de family. Wel op een dergelijke manier ingesteld dat de onderdelen niet worden meegeteld bij het samenstellen van de stuklijst.</p>
		<p>Donderdag 29 december 2022</p>
		<p>Vandaag zou ik alles een beetje afraffelen en een eindconclusie trekken of iets dergelijks. Nieuw project met verse families van de grond af opbouwen. Na een paar routines, het stuk snelweg stond alweer helemaal vol, bleef ik toch weer ergens hangen waar ik me aan ergerde. Sommige vieports moet je strekken en rekken om de lichtmast te kunnen zien. De lijn waarmee de sneden worden getrokken ligt op level 0 maaiveld. Kan het viewport zo groot mogelijk maken in een A4, maar soms moet je scrollen in de viewport en dat moet niet hoeven. Dus weer terug naar de tekentafel. De waarden zijn er allemaal wel maar staan soms op een ander excel document, dus moet je een beetje plakken en knippen om de juiste combinatie te vinden (de z waarde van dat type lichtmast). Een lijst met maximum en minimumwaarden voor de y component van de viewport. En weer gaat dat gewoon goed komen. Niet zeuren gewoon even regelen en daarna wel weer door. Wordt vanzelf handig in het samenstellen van die lijsten.</p>
		
		<img src="../image/RDB009.jpg" alt="RDB" width='100%' height='auto'>
		 
		<p>Vrijdag 31 december 2022</p>
		<p>Toch lastig al die bestanden uit elkaar houden. Moet daar flink in gaan verbeteren want ik haal af en toe alles door elkaar. Net als bij QGIS heb ik binnen de kortste keren allerlei bestanden open staan en overschreven. Gebeurt nou eenmaal of je moet na elke arbeidsgang even al je bestanden opslaan en sluiten. Geen tijd voor, en maar door kachelen. Huilon. Ik had de doorsnedes aardig onder controle. Behalve het niveau in y-richting wilde ik ook zijwaarts de breedte met een paar coördinaten aangeven zodat je af en toe en grotere of kleinere uitsnede maken kan. Al naar gelang wat je wilt laten zien en waar. In één richting ging dat goed, maar toen ik de zaak negentig graden ging omdraaien, raakte ik geheel en al de weg kwijt. Morgen nog een poging wagen, wellicht de richting van de lijn omdraaien. Dan zou het makkelijker gaan (amateur).</p>
		<p>Zaterdag 31 december 2022</p>
		<p>Een laatste maal de autocadbestanden aangepast (hopelijk) een elementvolgnummer en een typevolgnummer toegevoegd aan het block dus de extractie. Om de volgorde van de verschillende types vast te leggen dacht ik. Maar toen ik nu vol vertrouwen alles in de ruimte had geplakt ging het weer mis met het aanpassen van de rotatie. Daar raakte Revit de tel of de volgorde kwijt (of ik doe iets niet hopeloos fout (kan natuurlijk ook)). Lichtmasten en kasten staan alle kanten op te wijzen. Behalve de goeie. Niet begrepen wat er aan schort, maar ik wil door. In ieder geval ben ik terug naar per type lichtmast de parameters invullen waaronder de draaihoek. Als ik dan een alignement ga opbouwen, heb ik alle elementen nodig die ik tegenkom als ik van de lage naar de hoge kilometrage de snelweg bewandel.</p>
		
		<img src="../image/RDB010.jpg" alt="RDB" width='60%' height='auto'>
		 
		 <p>In AutoCAD heb ik de stations vastgesteld waar de machine halt houdt en een dwarsdoorsnede maakt. Dan is het makkelijk om op de volgorde te rangschikken (en in Dynamo een lijstje te maken), dan komen je dwarsdoorsnedes op het juiste tekeningenvel. Die lelijke snotterbel op de layout is een instelling van view title maar ik heb de kracht niet meer. De naam van de dwarsdoorsnede en het nummer doen we ook doorlinken zodat er geen fouten kunnen worden gemaakt. Nu wil ik eigenlijk nog een stuklijst op elke tekening. Maar wellicht is dat te veel gevraagd. Ben toe aan een berg bier. En ik weet dat met meer recente versies van Revit veel meer te knutselen valt in Dynamo. Voor de goede orde ik heb alleen de blokken in AutoCAD iets aangepast (uitgebreid met een paar volgorde attributen voor element en (lichtmast of kast-type). Heb in Revit een lijn getekend de hartlijn van de weg (na 2020 zou dat niet meer hoeven omdat vanaf dat jaar Civil 3D ook is uitgerust met Dynamo). Ga met standalone Dynamo verder dingetjes met Python uitproberen (daar is binnen Dynamo een module voor en er bestaat ook zoiets als pyRevit).</p>
		 
		 <img src="../image/RDB011.jpg" alt="RDB" width='60%' height='auto'>

      </div> 
	  
    <div class="fixed-footer">
	    <div>
			<div class = "plaatje-footer">
				<img title="feesboek" src="../image/face.png" onmouseover="this.src='../image/face_on.png'" onmouseout="this.src='../image/face.png'" />			
			</div>
			<div class = "plaatje-footer">
				<a href = "webpage005.html"><img title="plaatje" src="../image/insta.png" onmouseover="this.src='../image/insta_on.png'" onmouseout="this.src='../image/insta.png'" /></a>
			</div>
			<div class = "plaatje-footer">
				<img title="linkin" src="../image/link.png" onmouseover="this.src='../image/link_on.png'" onmouseout="this.src='../image/link.png'" />
			</div>
			<div class = "plaatje-footer">
				<img title="tweet" src="../image/twit.png" onmouseover="this.src='../image/twit_on.png'" onmouseout="this.src='../image/twit.png'" />
			</div>
        </div>
	</div>
	</body>
</html>
